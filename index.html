<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Google Login Demo (Firebase v9)</title>
</head>
<body>
  <h2>üîë Google Login ‡∏î‡πâ‡∏ß‡∏¢ Firebase v9</h2>

  <button id="loginBtn">Login with Google</button>
  <button id="logoutBtn">Logout</button>

  <p id="status">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</p>

  <!-- Firebase SDK (Modular v9+) -->
  <script type="module">
    // Import SDKs ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged }
      from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    // Firebase config ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    const firebaseConfig = {
      apiKey: "AIzaSyDP2aMy4Bqp7eV5BS9h3PJkR7y7yXT9Ia8",
      authDomain: "mathdatabase-5caee.firebaseapp.com",
      projectId: "mathdatabase-5caee",
      storageBucket: "mathdatabase-5caee.firebasestorage.app",
      messagingSenderId: "13977267649",
      appId: "1:13977267649:web:148c6113f9af3448d11340",
      measurementId: "G-XSHKM6QEP8"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // ‡∏õ‡∏∏‡πà‡∏° Login
    document.getElementById("loginBtn").addEventListener("click", async () => {
      const provider = new GoogleAuthProvider();
      try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;
        document.getElementById("status").innerText =
          `‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß: ${user.displayName} (${user.email})`;
      } catch (error) {
        console.error("Error:", error);
        alert("‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + error.message);
      }
    });

    // ‡∏õ‡∏∏‡πà‡∏° Logout
    document.getElementById("logoutBtn").addEventListener("click", async () => {
      await signOut(auth);
    });

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
    onAuthStateChanged(auth, (user) => {
      if (user) {
        document.getElementById("status").innerText =
          `‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß: ${user.displayName} (${user.email})`;
      } else {
        document.getElementById("status").innerText = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô";
      }
    });
  </script>
</body>
</html>

